<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<title></title>
		<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<style>
      p[hoge] {
        font-size: 24px;
      }
      p[fuga] {
        background: #f00;
      }
      p[piyo] {
        color: #0f0;
      }

      body {
        transition: 0.3s;
      }
      body[unresolve] {
        opacity: 0;
      }
    </style>
  </head>
	<body unresolve>
		<h1 id="id1">Hello remew.js</h1>
		<p id="p" hoge$="${hoge}" fuga="${fuga}" piyo="${piyo}">test p tag</p>
		<input id="input" type="text">
		<input id="checkbox" type="checkbox">
		<script src="build/remew.min.js"></script>
		<script>
window.addEventListener('DOMContentLoaded', function() {
	console.log('DOMContentLoaded');
	/*var input = document.getElementById('input');
	var p			= document.getElementById('p');
	window.p = p;
	var checkbox = document.getElementById('checkbox');


	var attrs = p.attributes;

	var obj = {value: ''};
	window.obj = obj;

	var bindRe = /\$\{(.*)\}/;
	var bindAttrList = [];
	var bindAttrMap = {};

	for (var i = attrs.length - 1; i >= 0; i--) {
		if (bindRe.test(attrs[i].value)) {
			var prop = bindRe.exec(attrs[i].value)[1];
			console.log('passed RegEx:', prop, attrs[i].name);
			bindAttrList.push(prop);
			bindAttrMap[prop] = attrs[i].name;
			p.removeAttribute(attrs[i].name);
		}
	}

	remew.observe(obj, bindAttrList, function(prop, n, o) {
			if (typeof n === 'object') {
				console.log('new value is an object');
			}
			if (n === null || n === undefined) {
				p.removeAttribute(bindAttrMap[prop]);
			} else {
				p.setAttribute(bindAttrMap[prop], n);
			}
			p[prop] = n;
	});*/
	document.body.removeAttribute('unresolve');
});
/*var input = document.getElementById('input');
var p			= document.getElementById('p');
var checkbox = document.getElementById('checkbox');


var attrs = p.attributes;

var obj = {value: ''};

var bindRe = /\$\{(.*)\}/;
var bindAttrList = [];

for (var i = attrs.length - 1; i >= 0; i--) {
	if (bindRe.test(attrs[i].value)) {
		var prop = bindRe.exec(attrs[i].value)[1];
		console.log('passed RegEx:', prop);
		p.removeAttribute(attrs[i].name);
		bindAttrList.push(prop);
	}
}

remew.observe(obj, bindAttrList, function(prop, n, o) {
		if (n === null || n === undefined) {
			p.removeAttribute(prop);
		} else {
			p.setAttribute(prop, n);
		}
});*/
/*remew.observe(obj, 'value', function(prop, n, o) {
		p.innerText = n;
});
remew.observe(input, function(prop, n, o) {
		p.innerText = n;
		obj.value = n;
});

remew.observe(checkbox, function(prop, n, o) {
		console.log('before:', o, 'after:', n);
});*/

/**
 * I want to write following code...
 *
 * remew.bind(obj, 'value', p, 'innerText');
 * remew.bind(input, obj, 'value');
 */
		</script>
	</body>
</html>


